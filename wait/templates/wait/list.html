{% extends 'base.html' %}
{% load static %}
{% load jalali_tags %}

{% block title %}
    لیست انتظار
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'wait/list.css' %}">
{% endblock %}

{% block body %}
    <div class="container mt-5" dir="rtl">
    {% include 'messages.html' %}

    <a href="{% url 'wait:wait_add' %}" class="new_customer">افزودن</a>

    <table class="table" dir="rtl">
        <thead>
        <tr>
            <th>ردیف</th>
            <th>نام مشتری</th>
            <th>شماره تماس</th>
            <th>امکانات</th>
            <th>وضعیت</th>
        </tr>
        </thead>
        <tbody>
        {% for wait_list in wait_lists %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ wait_list.name }}</td>
                <td>{{ wait_list.phone_number }}</td>
                <td>{{ wait_list.facility }}</td>
                <!-- Editable Status Dropdown -->
                <td>
                    <form method="post" action="{% url 'wait:wait_change_status' wait_list.id %}">
                        {% csrf_token %}
                        <select name="status" onchange="this.form.submit()" class="status-select">
                            {% for key, value in wait_list.WAIT_STATUS %}
                                <option value="{{ key }}" {% if wait_list.status == key %}selected{% endif %}>
                                    {{ value }}
                                </option>
                            {% endfor %}
                        </select>
                    </form>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>


{% endblock %}
